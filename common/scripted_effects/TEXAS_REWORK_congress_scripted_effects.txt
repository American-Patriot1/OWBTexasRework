# Usage:
## ncr_congress_emergency_session_effect_option_1 = yes
ncr_congress_emergency_session_effect_option_1 = {
	if = {
		limit = {
			ncr_congress_has_active_crisis = yes
		}
		if = {
			limit = {
				check_variable = { global.ncr_congress_current_crisis = 1 }
			}
			add_political_power = 1 # placeholder
		}
		# else_if ...
	}
}

# Usage:
## ncr_congress_emergency_session_effect_option_2 = yes
ncr_congress_emergency_session_effect_option_2 = {
	if = {
		limit = {
			ncr_congress_has_active_crisis = yes
		}
		if = {
			limit = {
				check_variable = { global.ncr_congress_current_crisis = 1 }
			}
			add_political_power = 2 # placeholder
		}
		# else_if ...
	}
}

# Usage:
## ncr_congress_emergency_session_effect_option_3 = yes
ncr_congress_emergency_session_effect_option_3 = {
	if = {
		limit = {
			ncr_congress_has_active_crisis = yes
		}
		if = {
			limit = {
				check_variable = { global.ncr_congress_current_crisis = 1 }
			}
			add_political_power = 3 # placeholder
		}
		# else_if ...
	}
}

# Usage:
## set_temp_variable = { ncr_crisis_id = 1 }
## ncr_congress_start_crisis = yes
ncr_congress_start_crisis = {
	if = {
		limit = {
			NOT = { ncr_congress_has_active_crisis = yes }
		}
		custom_effect_tooltip = NCR_CONGRESS_START_CRISIS_TT
		set_global_flag = ncr_congress_active_crisis
		set_variable = { global.ncr_congress_current_crisis = ncr_crisis_id }
		set_variable = { global.ncr_congress_emergency_session_votes_option_1 = 0 }
		set_variable = { global.ncr_congress_emergency_session_votes_option_2 = 0 }
		set_variable = { global.ncr_congress_emergency_session_votes_option_3 = 0 }
	}
}

# Usage:
## ncr_congress_end_current_crisis = yes
ncr_congress_end_current_crisis = {
	if = {
		limit = {
			ncr_congress_has_active_crisis = yes
		}
		custom_effect_tooltip = NCR_CONGRESS_END_CURRENT_CRISIS_TT
		every_country = {
			tooltip = NCR_CONGRESS_MEMBERS_TOOLTIP_NAME
			limit = {
				OR = {
					tag = NCR
					is_in_faction_with = NCR
				}
			}
			if = {
				limit = {
					NOT = { check_variable = { global.ncr_congress_emergency_session_votes_option_1 < global.ncr_congress_emergency_session_votes_option_2 } }
					NOT = { check_variable = { global.ncr_congress_emergency_session_votes_option_1 < global.ncr_congress_emergency_session_votes_option_3 } }
				}
				ncr_congress_emergency_session_effect_option_1 = yes
			}
			else_if = {
				limit = {
					NOT = { check_variable = { global.ncr_congress_emergency_session_votes_option_2 < global.ncr_congress_emergency_session_votes_option_1 } }
					NOT = { check_variable = { global.ncr_congress_emergency_session_votes_option_2 < global.ncr_congress_emergency_session_votes_option_3 } }
				}
				ncr_congress_emergency_session_effect_option_2 = yes
			}
			else = {
				ncr_congress_emergency_session_effect_option_3 = yes
			}
		}
		clr_global_flag = ncr_congress_active_crisis
		clear_variable = global.ncr_congress_current_crisis
		clear_variable = global.ncr_congress_emergency_session_votes_option_1
		clear_variable = global.ncr_congress_emergency_session_votes_option_2
		clear_variable = global.ncr_congress_emergency_session_votes_option_3
	}
}
# Usage:
## close_ncr_congress_window = yes
close_ncr_congress_window = {
	clear_variable = show_ncr_congress_window
	clear_variable = ncr_congress_slider_target
	clear_variable = projected_candidate_id
	clear_variable = executive_slider_icon_value
	clear_variable = executive_slider_icon_x_position
	clear_variable = war_slider_icon_value
	clear_variable = war_slider_icon_x_position
	clear_variable = corruption_slider_icon_value
	clear_variable = corruption_slider_icon_x_position
	clear_variable = equality_slider_icon_value
	clear_variable = equality_slider_icon_x_position
	clear_variable = zeal_slider_icon_value
	clear_variable = zeal_slider_icon_x_position
}

# Usage:
## set_ncr_congress_slider_values = yes
set_ncr_congress_slider_values = {
	if = {
		limit = {
			check_variable = { ncr_congress_slider_target = 0 }
		}
		set_variable = { projected_candidate_id = global.ncr_congress_projected_candidate }
		# Executive Slider
		set_variable = { executive_slider_icon_value = global.ncr_congress_value_executive }
		set_variable = { executive_slider_icon_x_position = global.ncr_congress_value_executive }
		divide_variable = { executive_slider_icon_x_position = 100 }
		multiply_variable = { executive_slider_icon_x_position = 210 }
		round_variable = executive_slider_icon_x_position
		# War Slider
		set_variable = { war_slider_icon_value = global.ncr_congress_value_war }
		set_variable = { war_slider_icon_x_position = global.ncr_congress_value_war }
		divide_variable = { war_slider_icon_x_position = 100 }
		multiply_variable = { war_slider_icon_x_position = 210 }
		round_variable = war_slider_icon_x_position
		# Corruption Slider
		set_variable = { corruption_slider_icon_value = global.ncr_congress_value_corruption }
		set_variable = { corruption_slider_icon_x_position = global.ncr_congress_value_corruption }
		divide_variable = { corruption_slider_icon_x_position = 100 }
		multiply_variable = { corruption_slider_icon_x_position = 210 }
		round_variable = corruption_slider_icon_x_position
		# Equality Slider
		set_variable = { equality_slider_icon_value = global.ncr_congress_value_equality }
		set_variable = { equality_slider_icon_x_position = global.ncr_congress_value_equality }
		divide_variable = { equality_slider_icon_x_position = 100 }
		multiply_variable = { equality_slider_icon_x_position = 210 }
		round_variable = equality_slider_icon_x_position
		# Zeal Slider
		set_variable = { zeal_slider_icon_value = global.ncr_congress_value_zeal }
		set_variable = { zeal_slider_icon_x_position = global.ncr_congress_value_zeal }
		divide_variable = { zeal_slider_icon_x_position = 100 }
		multiply_variable = { zeal_slider_icon_x_position = 210 }
		round_variable = zeal_slider_icon_x_position
	}
	else = {
		set_variable = { projected_candidate_id = PREV.ncr_congress_projected_candidate }
		# Executive Slider
		set_variable = { executive_slider_icon_value = PREV.ncr_congress_value_executive }
		set_variable = { executive_slider_icon_x_position = PREV.ncr_congress_value_executive }
		divide_variable = { executive_slider_icon_x_position = 100 }
		multiply_variable = { executive_slider_icon_x_position = 210 }
		round_variable = executive_slider_icon_x_position
		# War Slider
		set_variable = { war_slider_icon_value = PREV.ncr_congress_value_war }
		set_variable = { war_slider_icon_x_position = PREV.ncr_congress_value_war }
		divide_variable = { war_slider_icon_x_position = 100 }
		multiply_variable = { war_slider_icon_x_position = 210 }
		round_variable = war_slider_icon_x_position
		# Corruption Slider
		set_variable = { corruption_slider_icon_value = PREV.ncr_congress_value_corruption }
		set_variable = { corruption_slider_icon_x_position = PREV.ncr_congress_value_corruption }
		divide_variable = { corruption_slider_icon_x_position = 100 }
		multiply_variable = { corruption_slider_icon_x_position = 210 }
		round_variable = corruption_slider_icon_x_position
		# Equality Slider
		set_variable = { equality_slider_icon_value = PREV.ncr_congress_value_equality }
		set_variable = { equality_slider_icon_x_position = PREV.ncr_congress_value_equality }
		divide_variable = { equality_slider_icon_x_position = 100 }
		multiply_variable = { equality_slider_icon_x_position = 210 }
		round_variable = equality_slider_icon_x_position
		# Zeal Slider
		set_variable = { zeal_slider_icon_value = PREV.ncr_congress_value_zeal }
		set_variable = { zeal_slider_icon_x_position = PREV.ncr_congress_value_zeal }
		divide_variable = { zeal_slider_icon_x_position = 100 }
		multiply_variable = { zeal_slider_icon_x_position = 210 }
		round_variable = zeal_slider_icon_x_position
	}
}

# Usage:
# dissolve_ncr_congress = yes
dissolve_ncr_congress = {
	ncr_congress_end_current_crisis = yes
	custom_effect_tooltip = DISSOLVE_NCR_CONGRESS_TT
	hidden_effect = {
		set_global_flag = ncr_congress_dissolved
		every_country = { close_ncr_congress_window = yes }
	}
}

## NCR Vote of No Confidence Effects
# Usage:
# set_temp_variable = { vonc_change = x }
# increase_kimball_score = yes
increase_kimball_score = {
	if = {
		limit = { check_variable = { vonc_change < ncr_vonc_undecided } }
		subtract_from_variable = { ncr_vonc_undecided = vonc_change }
		add_to_variable = {
			var = ncr_vonc_kimball
			value = vonc_change
		}
		custom_effect_tooltip = ncr_vonc_kimball_add
	}
	else = {
		set_temp_variable = { vonc_change_temp = vonc_change }
		subtract_from_temp_variable = { vonc_change_temp = ncr_vonc_undecided }
		set_variable = { ncr_vonc_undecided = 0 }
		divide_temp_variable = { vonc_change_temp = 2 }
		subtract_from_variable = { ncr_vonc_allgood = vonc_change_temp }
		subtract_from_temp_variable = { vonc_change = vonc_change_temp }
		add_to_variable = {
			var = ncr_vonc_kimball
			value = vonc_change
		}
		custom_effect_tooltip = ncr_vonc_kimball_add
	}
}

# Usage:
# set_temp_variable = { vonc_change = x }
# increase_allgood_score = yes
increase_allgood_score = {
	if = {
		limit = { check_variable = { vonc_change < ncr_vonc_undecided } }
		subtract_from_variable = { ncr_vonc_undecided = vonc_change }
		add_to_variable = {
			var = ncr_vonc_allgood
			value = vonc_change
		}
		custom_effect_tooltip = ncr_vonc_allgood_add
	}
	else = {
		set_temp_variable = { vonc_change_temp = vonc_change }
		subtract_from_temp_variable = { vonc_change_temp = ncr_vonc_undecided }
		set_variable = { ncr_vonc_undecided = 0 }
		divide_temp_variable = { vonc_change_temp = 2 }
		subtract_from_variable = { ncr_vonc_kimball = vonc_change_temp }
		subtract_from_temp_variable = { vonc_change = vonc_change_temp }
		add_to_variable = {
			var = ncr_vonc_allgood
			value = vonc_change
		}
		custom_effect_tooltip = ncr_vonc_allgood_add
	}
}

### Hayes Score

increase_hayes_score = {
	if = {
		limit = { check_variable = { vonc_change < ncr_vonc_undecided } }
		subtract_from_variable = { ncr_vonc_undecided = vonc_change }
		add_to_variable = {
			var = ncr_vonc_hayes
			value = vonc_change
		}
		custom_effect_tooltip = ncr_vonc_hayes_add
	}
	else = {
		set_temp_variable = { vonc_change_temp = vonc_change }
		subtract_from_temp_variable = { vonc_change_temp = ncr_vonc_undecided }
		set_variable = { ncr_vonc_undecided = 0 }
		divide_temp_variable = { vonc_change_temp = 2 }
		subtract_from_variable = { ncr_vonc_kimball = vonc_change_temp }
		subtract_from_temp_variable = { vonc_change = vonc_change_temp }
		add_to_variable = {
			var = ncr_vonc_hayes
			value = vonc_change
		}
		custom_effect_tooltip = ncr_vonc_hayes_add
	}
}

# Usage:
# set_temp_variable = { deployed_divs = x }
# deploy_troopers = yes
deploy_troopers = {
	custom_effect_tooltip = deploy_troopers_tt
	add_to_variable = { deploy_trooper_div = deployed_divs }
	subtract_from_variable = { avail_trooper_div = deployed_divs }
	clamp_variable = { var = avail_trooper_div min = 0 }
}

# Usage:
# set_temp_variable = { deployed_divs = x }
# deploy_troopers = yes
deploy_rangers = {
	custom_effect_tooltip = deploy_rangers_tt
	add_to_variable = { deploy_ranger_div = deployed_divs }
	subtract_from_variable = { avail_ranger_div = deployed_divs }
	clamp_variable = { var = avail_ranger_div min = 0 }
}

# Usage:
# set_temp_variable = { deployed_divs = x }
# add_troopers = yes
add_troopers = {
	custom_effect_tooltip = add_troopers_tt
	add_to_variable = { avail_trooper_div = deployed_divs }
	subtract_from_variable = { deploy_trooper_div = deployed_divs }
	clamp_variable = { var = deploy_trooper_div min = 0 }
}

# Usage:
# set_temp_variable = { deployed_divs = x }
# add_rangers = yes
add_rangers = {
	custom_effect_tooltip = add_rangers_tt
	add_to_variable = { avail_ranger_div = deployed_divs }
	subtract_from_variable = { deploy_ranger_div = deployed_divs }
	clamp_variable = { var = deploy_ranger_div min = 0 }
}